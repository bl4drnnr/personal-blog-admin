<layout-default>
  <div class="admin-page-container">
    <div class="page-header">
      <div class="header-content">
        <div class="header-left">
          <basic-button
            label="← Back to Articles"
            [onWhite]="true"
            (buttonClick)="cancel()"
          />
          <div class="page-title-section">
            <h1>Create New Article</h1>
            <div class="status-badges">
              <span class="status-badge draft">
                Draft
              </span>
              <span class="status-badge featured" *ngIf="featured">
                Featured
              </span>
            </div>
          </div>
        </div>
        <div class="header-actions">
          <div class="quick-actions">
            <basic-button
              label="Save as Draft"
              [onWhite]="true"
              (buttonClick)="createArticle()"
            />
            <basic-button
              label="Publish Now"
              [fillButton]="true"
              [onWhite]="false"
              (buttonClick)="publishArticle()"
            />
            <basic-button
              [label]="featured ? 'Unfeature' : 'Feature'"
              [fillButton]="!featured"
              [onWhite]="featured"
              (buttonClick)="toggleFeatured()"
            />
          </div>
        </div>
      </div>
    </div>

    <!-- Edit Form -->
    <div class="content-section">
      <!-- Basic Information -->
      <div class="card">
        <div class="card-header">
          <h2>Basic Information</h2>
        </div>
        <div class="form-section">
          <div class="form-row">
            <div class="form-group full-width">
              <basic-input
                type="text"
                label="Article Title"
                placeholder="Enter article title"
                [value]="title"
                (valueChange)="title = $event"
              />
            </div>
          </div>

          <div class="form-row">
            <div class="form-group full-width">
              <basic-textarea
                label="Description"
                placeholder="Enter article description for SEO and preview"
                [value]="description"
                (valueChange)="description = $event"
              />
            </div>
          </div>

          <div class="form-row">
            <div class="form-group full-width">
              <basic-textarea
                label="Excerpt"
                placeholder="Enter short excerpt for article previews"
                [value]="excerpt"
                (valueChange)="excerpt = $event"
              />
            </div>
          </div>

          <div class="form-row">
            <div class="form-group full-width">
              <basic-input
                label="Meta Keywords"
                placeholder="Enter SEO keywords separated by commas (e.g., web development, javascript, tutorial)"
                [value]="metaKeywords"
                (valueChange)="metaKeywords = $event"
              />
            </div>
          </div>

          <div class="form-row">
            <div class="form-group full-width">
              <asset-selector
                label="Featured Image"
                placeholder="Search for featured image..."
                [(ngModel)]="featuredImageId"
              />
            </div>
          </div>
        </div>
      </div>

      <!-- Content -->
      <div class="card">
        <div class="card-header">
          <h2>Content</h2>
        </div>
        <div class="form-section">
          <div class="form-row">
            <div class="form-group full-width">
              <basic-html-editor
                label="Article Content"
                [value]="content"
                (valueChange)="content = $event"
                (processedContentForSave)="processedContent = $event"
                [showPreview]="true"
              />
            </div>
          </div>
        </div>
      </div>

      <!-- Tags & Status Settings -->
      <div class="card">
        <div class="card-header">
          <h2>Tags Settings</h2>
        </div>
        <div class="form-section">
          <!-- Tags Section -->
          <div class="tags-input-container">
            <h4>Tags</h4>
            <div class="current-tags" *ngIf="tags.length > 0">
              <span *ngFor="let tag of tags; let i = index" class="tag">
                {{ tag }}
                <button type="button" class="tag-remove" (click)="removeTag(i)">×</button>
              </span>
            </div>
            <div class="add-tag-input">
              <basic-input
                type="text"
                label="Add Tag"
                placeholder="Enter tag and press Enter"
                [value]="tagInput"
                (valueChange)="tagInput = $event"
                (keyup)="onTagInputKeyPress($event)"
              />
            </div>
            <basic-button
              label="Add Tag"
              [onWhite]="true"
              (buttonClick)="addTag()"
              [disabled]="!tagInput.trim()"
            />
          </div>
        </div>
      </div>

      <!-- Final Actions -->
      <div class="final-actions">
        <basic-button
          label="Create Article"
          [fillButton]="true"
          [onWhite]="false"
          (buttonClick)="createArticle()"
        />
        <basic-button
          label="Cancel"
          [onWhite]="true"
          (buttonClick)="cancel()"
        />
      </div>
    </div>
  </div>
</layout-default>
